<!-- orders.html -->
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>ÄÆ¡n hÃ ng cá»§a tÃ´i</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <button id="themeToggle" style="margin-left: 15px;">ğŸŒ™</button>


</head>
<body>
  <header>
    <h1>ğŸ“¦ ÄÆ¡n hÃ ng Ä‘Ã£ Ä‘áº·t</h1>
    <a href="index.html">â† Quay láº¡i mua sáº¯m</a>
  </header>

  <main>
    <div id="orderList"></div>
  </main>

  <script>
    const currentUser = JSON.parse(localStorage.getItem("currentUser"));
    const orderListEl = document.getElementById("orderList");

    if (!currentUser) {
      orderListEl.innerHTML = "<p>Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ xem Ä‘Æ¡n hÃ ng.</p>";
    } else {
      const orders = JSON.parse(localStorage.getItem("orders")) || [];
      const userOrders = orders.filter(o => o.username === currentUser.username);

      if (userOrders.length === 0) {
        orderListEl.innerHTML = "<p>Báº¡n chÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o.</p>";
      } else {
        let html = "";
        userOrders.reverse().forEach((order, idx) => {
  let total = 0;
  let itemsHtml = order.items.map(item => {
    const itemTotal = item.quantity * item.price;
    total += itemTotal;
    return `<li>${item.name} Ã— ${item.quantity} - ${itemTotal.toLocaleString()}â‚«</li>`;
  }).join("");

  // Náº¿u chÆ°a cÃ³ trÆ°á»ng status trong Ä‘Æ¡n hÃ ng thÃ¬ máº·c Ä‘á»‹nh
  const status = order.status || "ğŸ”„ Äang xá»­ lÃ½";

  // Táº¡o mÃ£ Ä‘Æ¡n #001, #002,...
  const orderCode = `#${String(userOrders.length - idx).padStart(3, "0")}`;

  html += `
    <div class="order-card">
      <h3>ğŸ§¾ ÄÆ¡n hÃ ng ${orderCode}</h3>
      <p><strong>NgÃ y Ä‘áº·t:</strong> ${order.date}</p>
      <p><strong>Tráº¡ng thÃ¡i:</strong> ${status}</p>
      <ul>${itemsHtml}</ul>
      <p><strong>Tá»•ng cá»™ng:</strong> ${total.toLocaleString()}â‚«</p>
    </div>
  `;
});

        orderListEl.innerHTML = html;
      }
    }
  </script>

  <footer>
  <div class="footer-container">
    <div class="footer-section">
      <h3>ğŸ‘¨â€ğŸ’» Giá»›i thiá»‡u nhÃ³m</h3>
      <ul>
        <li>Nguyá»…n Quang ThÃ nh â€“ 24IT247</li>
        <li>Tráº§n ThÃ¡i HoÃ ng â€“ 24IT336</li>
        <li>Nguyá»…n Kim Báº£o â€“ 24ITE123</li>
      </ul>
    </div>
    <div class="footer-section">
      <h3>ğŸ“ LiÃªn há»‡</h3>
      <ul>
        <li><a href="https://www.facebook.com/" target="_blank">ğŸŒ Facebook</a></li>
        <li><a href="https://zalo.me/" target="_blank">ğŸ’¬ Zalo</a></li>
        <li>ğŸ“± 0123 456 789</li>
      </ul>
    </div>
  </div>
</footer>

</body>
</html>
