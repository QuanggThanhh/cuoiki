<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>H√≥a ƒë∆°n mua h√†ng</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      background: #f4f4f4;
      font-family: Arial, sans-serif;
    }

    .invoice-container {
      max-width: 600px;
      margin: 30px auto;
      background: white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .invoice-container h2 {
      text-align: center;
      margin-bottom: 20px;
    }

    .invoice-container ul {
      list-style: none;
      padding: 0;
    }

    .invoice-container li {
      margin-bottom: 8px;
    }

    .invoice-container p {
      margin: 5px 0;
    }

    @media print {
      .invoice-container {
        box-shadow: none;
        margin: 0;
        border: none;
      }
    }
  </style>
</head>
<body>
  <div class="invoice-container" id="invoice">
    <h2>üßæ H√ìA ƒê∆†N MUA H√ÄNG</h2>
    <p><strong>Kh√°ch h√†ng:</strong> <span id="invName"></span></p>
    <p><strong>Ng√†y ƒë·∫∑t:</strong> <span id="invDate"></span></p>
    <ul id="invItems"></ul>
    <p><strong>T·ªïng c·ªông:</strong> <span id="invTotal"></span></p>
  </div>

  <script>
    const order = JSON.parse(localStorage.getItem("lastOrder"));
    if (!order) {
      document.body.innerHTML = "<p style='text-align:center;color:red'>‚ùå Kh√¥ng t√¨m th·∫•y ƒë∆°n h√†ng ƒë·ªÉ in.</p>";
    } else {
      document.getElementById("invName").textContent = order.username;
      document.getElementById("invDate").textContent = order.date;

      const ul = document.getElementById("invItems");
      let total = 0;

      order.items.forEach(item => {
        const itemTotal = item.quantity * item.price;
        total += itemTotal;
        const li = document.createElement("li");
        li.textContent = `${item.name} √ó ${item.quantity} - ${itemTotal.toLocaleString()}‚Ç´`;
        ul.appendChild(li);
      });

      document.getElementById("invTotal").textContent = total.toLocaleString() + "‚Ç´";

      // üñ®Ô∏è T·ª± ƒë·ªông m·ªü h·ªôp tho·∫°i in sau khi render xong
      setTimeout(() => {
        window.print();
      }, 500);
    }
  </script>
</body>
</html>
